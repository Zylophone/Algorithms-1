This can be done with max histogram in an array.

Histogram shape is rectangle.
